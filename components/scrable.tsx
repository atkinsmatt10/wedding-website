'use client';
import { cn } from '@/lib/utils';
import { Variants, motion, useAnimation, useInView } from 'framer-motion';
import { useEffect, useRef } from 'react';

const vars: Variants = {
  from: {
    pathLength: 0,
  },
  to: {
    pathLength: 1,
    transition: {
      duration: 0.7,
      ease: 'easeInOut',
      delay: 1.5,
    },
  },
};

type ScrableVars = {
  [x: number]: {
    d: string;
    position: string;
  };
};

const scrableVars: ScrableVars = {
  1: {
    d: 'M150.35841369628906,79.21147155761719C177.83750661214194,76.22461382548015,276.40382130940753,61.73835372924805,315.23297119140625,61.29032516479492C354.06212107340497,60.8422966003418,362.7239939371745,68.45878410339355,383.33331298828125,76.52330017089844C403.942632039388,84.58781623840332,423.5065663655599,90.41218821207683,438.8888854980469,109.67742156982422C454.2712046305339,128.94265492757162,474.7311706542969,168.66786575317383,475.6272277832031,192.1147003173828C476.5232849121094,215.5615348815918,464.8745473225911,245.28077189127603,444.2652282714844,250.35842895507812C423.6559092203776,255.43608601888022,364.2174326578776,236.91756184895834,351.9713134765625,222.5806427001953C339.7251942952474,208.24372355143228,337.9330749511719,172.55077362060547,370.78851318359375,164.3369140625C403.6439514160156,156.12305450439453,504.45041910807294,161.20071156819662,549.1039428710938,173.2974853515625C593.7574666341146,185.39425913492838,619.4444274902344,212.2759806315104,638.7096557617188,236.9175567626953C657.9748840332031,261.5591328938802,660.3643697102865,307.1087112426758,664.6953125,321.1469421386719',
    position: 'left-20 translate-x-full absolute top-6 scale-[2] -mr-12 mt-12',
  },
  2: {
    d: 'M697.8494262695312,59.67741775512695C691.2783406575521,76.70250765482585,684.8565979003906,139.72521018981934,658.4229125976562,161.8279571533203C631.9892272949219,183.9307041168213,582.4074096679688,195.4300994873047,539.247314453125,192.2938995361328C496.08721923828125,189.15769958496094,437.6941223144531,160.63321812947592,399.46234130859375,143.01075744628906C361.2305603027344,125.38829676310222,347.04300689697266,91.33810933430989,309.85662841796875,86.55913543701172C272.67024993896484,81.78016153971355,204.86856333414713,89.24730809529622,176.3440704345703,114.3369140625C147.8195775349935,139.42652002970377,150.20907338460287,202.44921875,138.7096710205078,237.09677124023438C127.21026865641277,271.74432373046875,112.5746587117513,308.03465270996094,107.34765625,322.22222900390625',
    position: 'absolute -translate-x-full scale-[1.5] -ml-20 -mt-12',
  },
  3: {
    d: 'M125.26880645751953,57.706092834472656C130.6451505025228,74.43249638875325,129.00237655639648,128.79330825805664,157.52687072753906,158.06451416015625C186.05136489868164,187.33572006225586,255.7945073445638,229.15172831217447,296.415771484375,233.3333282470703C337.0370356241862,237.51492818196616,364.0680745442708,202.4193458557129,401.25445556640625,183.15411376953125C438.4408365885417,163.8888816833496,478.01673380533856,120.1314214070638,519.5340576171875,117.74193572998047C561.0513814290365,115.35245005289714,619.2950846354166,144.3249651590983,650.3583984375,168.81719970703125C681.4217122395834,193.3094342549642,693.9665120442709,241.69653828938803,705.9139404296875,264.6953430175781C717.8613688151041,287.69414774576825,719.3547973632812,299.79091389973956,722.04296875,306.8100280761719',
    position: 'absolute right-0 translate-x-full scale-x-[2] ml-12',
  },
  4: {
    d: 'M618.100341796875,38.35124969482422C617.5029703776041,52.09079615275065,626.9115702311198,93.160093943278,614.51611328125,120.78852844238281C602.1206563313802,148.41696294148764,572.2520904541016,189.6355972290039,543.7276000976562,204.12185668945312C515.2031097412109,218.60811614990234,466.21863810221356,216.66665903727213,443.3691711425781,207.70608520507812C420.5197041829427,198.74551137288412,410.21502685546875,169.47430292765299,406.63079833984375,150.35841369628906C403.04656982421875,131.24252446492514,404.2413330078125,103.912779490153,421.8638000488281,93.01074981689453C439.48626708984375,82.10872014363606,493.2497100830078,77.62843449910481,512.3656005859375,84.94623565673828C531.4814910888672,92.26403681437175,532.5268859863281,109.73715082804362,536.5591430664062,136.9175567626953C540.5914001464844,164.09796269734701,554.1816050211588,217.8614069620768,536.5591430664062,248.02867126464844C518.9366811116537,278.19593556722003,463.6798095703125,303.8829116821289,430.8243713378906,317.921142578125C397.96893310546875,331.9593734741211,375.8661804199219,330.76462809244794,339.426513671875,332.258056640625C302.9868469238281,333.75148518880206,248.02866490681967,327.3297424316406,212.18637084960938,326.8817138671875C176.34407679239908,326.4336853027344,139.00835291544595,329.1218566894531,124.37274932861328,329.56988525390625',
    position:
      'absolute top-0 translate-y-full right-0 ml-12 mt-12 -translate-x-full scale-[2]',
  },
};

type AnimatedScrableProps = {
  variant: number;
};

export default function AnimatedScrable({ variant }: AnimatedScrableProps) {
  const animate = useAnimation();
  const ref = useRef(null);
  const inView = useInView(ref, { once: true });

  useEffect(() => {
    if (inView) {
      animate.start('to');
    }
  }, [animate, inView]);

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      version="1.1"
      viewBox="0 0 800 400"
      className={cn('hidden lg:block', scrableVars[variant].position)}
      ref={ref}
    >
      <motion.path
        variants={vars}
        initial="from"
        animate={animate}
        d={scrableVars[variant].d}
        fill="none"
        strokeWidth="3"
        stroke="#b8a775"
        strokeLinecap="round"
      />
    </svg>
  );
}
